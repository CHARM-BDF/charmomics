# CHARMomics Frontend

CHARMomics's frontend is a Vue3 single page architecture (SPA) application and provides a Chatbot-like interface for
interacting with CHARMonator.

**Note:** The existing implementation interacts with an Ollama deployment only accessible on UAB network. Does not
actually provide a response without access to UAB VPN. The conversation is handled on the backend and the frontend is
only responsible for rendering the conversation. This will need to updated to use the endpoints provided by CHARMonator
in the future if this interface is kept.

## Setup

### Dependencies

- [Node.JS 16+](https://nodejs.org/en/) - [install](https://github.com/nvm-sh/nvm#install--update-script)
  - Recommended to manageNode.JS versions with [nvm](https://www.npmjs.com/package/npx)
- [Yarn - Classic](https://classic.yarnpkg.com/en/docs/getting-started) - [install](https://classic.yarnpkg.com/en/docs/install#windows-stable)

### Requirements

Dependencies for the CHARMomics frontend application and development are managed within the `package.json` file in the project's frontend root structure.

### Local Development

Run the following to setup application and development dependencies using Yarn.

```bash
yarn install
```

## Deployment

CHARMomics's frontend currently expects the host address route to end with `/` and for CHARMomics's backend service to
be available within the same base URL ending with `/api`. The conversation with the Chatbot will **fail** if
CHARMomics's backend service is inaccessible.

Use *docker* and *docker compose* facilitate these two dependencies to deploy CHARMomics in
it's entirety for local development. Visit [CHARMomics's Environment Setup and Deployment](../README.md#environment-setup)
for instructions on how to get started.

The local development deployment of CHARMomics uses [Vite](https://vitejs.dev/guide/) to build
and package CHARMomics which includes [Hot Module Replacement](https://vitejs.dev/guide/features.html#hot-module-replacement)
in support of rapid development.

## Build

Builds CHARMomics frontend for production.

```bash
yarn build
```

## Testing

The CHARMomics frontend uses [Vitest](https://vitest.dev/), a Vite-native unit test
framework along with:

- [Vue Test Utils](https://test-utils.vuejs.org/) for testing Vue 3 framework
- [Sinon.js](https://sinonjs.org/) for test spies, stubs, and mocking
- [Chai Assertion Library](https://www.chaijs.com/) for assertions, builtin to Vitest

### Unit Tests

Unit testing with Vitest supports hot module reloading by watching for changes in the project directory. Configuration
for unit testing is managed in the `vite.config.js` in the project directory.

```bash

# Running Unit Testing - Basic
yarn test:unit

# Running Unit Testing - with Watch and Hot Module Reloading
yarn test:unit:watch

# Running Unit Testing - Code Coverage

yarn test:coverage
```

#### Code Coverage

Code coverage configuration is managed in the `vite.config.js`by [vitest configuration](https://vitest.dev/config/#coverage) and is generated by [v8](https://v8.dev/blog/javascript-code-coverage#javascript-code-coverage-in-v8).

Visit `<{root_project_path/charmomics/frontend/coverage/index.html}>` within the browser to see an HTML report of the
code coverage generated from unit tests.

## Static Analysis

Analyze and linting the JavaScript codebase is done via [ESlint](https://eslint.org/).
CHARMomics uses the ESLint shareable config for Google's JavaScript style guide
[ESLint Google Config](https://github.com/google/eslint-config-google).

```bash
# Linting
yarn lint

# Auto-Fix Linting
yarn lint:auto
```
